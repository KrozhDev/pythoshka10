<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–ß–µ—Ä–µ–ø–∞—à—å—è –ê–∫–∞–¥–µ–º–∏—è üê¢</title>
    <!-- –£–±—Ä–∞–Ω—ã –ø—Ä–æ–±–µ–ª—ã –≤ URL -->
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.1.10/dist/skulpt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.1.10/dist/skulpt-stdlib.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.1.10/dist/turtle.js"></script>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: #e0f7fa;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: #00695c;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        #editor {
            width: 90%;
            height: 200px;
            font-size: 16px;
            border: 3px solid #00bcd4;
            border-radius: 10px;
            padding: 10px;
            font-family: monospace;
            white-space: pre;
        }

        button {
            background: #00bcd4;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
        }

        button:hover {
            background: #0097a7;
        }

        #canvas {
            border: 3px solid #0097a7;
            background: white;
            border-radius: 10px;
        }

        .task {
            background: #b2dfdb;
            padding: 15px;
            border-radius: 10px;
            max-width: 800px;
            margin: 10px auto;
        }
    </style>
</head>
<body>
<h1>üê¢ –ß–µ—Ä–µ–ø–∞—à—å—è –ê–∫–∞–¥–µ–º–∏—è</h1>
<p>–ù–∞–ø–∏—à–∏ –∫–æ–¥ –Ω–∞ Python –∏ –ø–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫ —á–µ—Ä–µ–ø–∞—à–∫–∞ —Ä–∏—Å—É–µ—Ç!</p>

<div class="task">
    <h3>–ó–∞–¥–∞–Ω–∏–µ 1: –ù–∞—Ä–∏—Å—É–π –∫–≤–∞–¥—Ä–∞—Ç</h3>
    <p>–ò—Å–ø–æ–ª—å–∑—É–π <code>t.forward(100)</code> –∏ <code>t.left(90)</code>. –ü–æ–≤—Ç–æ—Ä–∏ 4 —Ä–∞–∑–∞!</p>
</div>

<div class="container">
    <!-- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ -->
    <textarea id="editor" spellcheck="false">import turtle
t = turtle.Turtle()
# –ù–∞—Ä–∏—Å—É–π –∫–≤–∞–¥—Ä–∞—Ç –∑–¥–µ—Å—å
for i in range(4):
    t.forward(100)
    t.left(90)
</textarea>
    <button onclick="runCode()">–ó–∞–ø—É—Å—Ç–∏—Ç—å! ‚ñ∂Ô∏è</button>
    <button onclick="clearCanvas()">–û—á–∏—Å—Ç–∏—Ç—å üßπ</button>
</div>

<canvas id="canvas" width="600" height="400"></canvas>

<script>
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Skulpt –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function setupSkulpt() {
        Sk.HTMLElements = false;
        Sk.canvas = "canvas";
        Sk.configure({
            output: function(text) {
                // –ú–æ–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π div
                console.log(text);
            },
            read: function(filename) {
                if (Sk.builtinFiles && Sk.builtinFiles.files[filename]) {
                    return Sk.builtinFiles.files[filename];
                }
                throw "File not found: " + filename;
            },
            __future__: "python3"
        });
    }

    function runCode() {
        const code = document.getElementById("editor").value;
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ Skulpt –Ω–∞—Å—Ç—Ä–æ–µ–Ω
        setupSkulpt();

        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        Sk.canvas = "canvas";
        Sk.turtle.reset();

        try {
            // –ó–∞–ø—É—Å–∫ –∫–æ–¥–∞
            Sk.misceval.asyncToPromise(() => Sk.importMainWithBody("<stdin>", false, code, true))
                .then(() => console.log("–ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω"))
                .catch(err => {
                    alert("–û—à–∏–±–∫–∞: " + err);
                    console.error(err);
                });
        } catch (e) {
            alert("–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: " + e.message);
        }
    }

    function clearCanvas() {
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (Sk.turtle) {
            Sk.turtle.reset();
        }
    }

    // –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.onload = function () {
        setupSkulpt();
        runCode();
    };
</script>
</body>
</html>